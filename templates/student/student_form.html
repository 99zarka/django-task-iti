{% extends 'base.html' %}

{% block title %}{% if student %}Edit Student{% else %}Create Student{% endif %}{% endblock %}

{% block content %}
    <h1>{% if student %}Edit Student{% else %}Create New Student{% endif %}</h1>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <label for="name">Student Name:</label>
            <input type="text" id="name" name="name" value="{{ student.name|default:'' }}" required>
        </div>
        <div class="form-group">
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" value="{{ student.age|default:'' }}" required>
        </div>
        <div class="form-group">
            <label for="image">Image:</label>
            <input type="file" id="image" name="image">
            {% if student.image %}
                <p>Current Image: <img src="{{ student.image.url }}" alt="{{ student.name }}" width="50"></p>
            {% endif %}
        </div>
        <div class="form-group">
            <label for="date_of_birth">Date of Birth:</label>
            <input type="date" id="date_of_birth" name="date_of_birth" value="{{ student.date_of_birth|date:'Y-m-d'|default:'' }}" required>
        </div>
        <div class="form-group">
            <label for="track">Track:</label>
            <select id="track" name="track" required>
                {% for track in tracks %}
                    <option value="{{ track.id }}" {% if student.track.id == track.id %}selected{% endif %}>{{ track.name }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn">Save</button>
        <a href="{% url 'student_list' %}" class="btn btn-secondary">Cancel</a>
    </form>
{% endblock %}
